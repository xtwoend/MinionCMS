/*! pjax-api v3.8.0 https://github.com/falsandtru/pjax-api | (c) 2016, falsandtru | GPL-2.0 License */
require=function e(t,n,r){function o(u,c){if(!n[u]){if(!t[u]){var a="function"==typeof require&&require;if(!c&&a)return a(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[u]={exports:{}};t[u][0].call(l.exports,function(e){var n=t[u][1][e];return o(n||e)},l,l.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){},{}],2:[function(e,t,n){arguments[4][1][0].apply(n,arguments)},{dup:1}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./layer/interface/service/api");n.default=r.API;var o=e("./layer/interface/service/api");n.Pjax=o.API;var i=e("./lib/router");n.router=i.router},{"./layer/interface/service/api":38,"./lib/router":50}],4:[function(e,t,n){"use strict";function r(e,t,n,r){var i=new c.RouterEvent(t).location;return u.scope(e,{orig:i.orig.pathname,dest:i.dest.pathname}).extract(function(){return Promise.resolve(o.Left(new s.ApplicationError("Disabled to use pjax by config.")))},function(e){return a.route(new a.RouterEntity(new c.RouterEvent(t),e,new a.RouterEntity.State(n.scripts,n.cancelable)),r)})}Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica"),i=e("../domain/data/config");n.Config=i.Config;var u=e("./config/scope"),c=e("../domain/event/router"),a=e("../domain/router/api"),s=e("./data/error");n.route=r,function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./store/path"))},{"../domain/data/config":11,"../domain/event/router":13,"../domain/router/api":14,"./config/scope":5,"./data/error":6,"./store/path":7,spica:void 0}],5:[function(e,t,n){"use strict";function r(e,t){return u.Sequence.from(Object.keys(e.scope).sort().reverse()).dropWhile(function(e){return!o.compare(e,t.orig)&&!o.compare(e,t.dest)}).take(1).filter(function(e){return!!o.compare(e,t.orig)&&o.compare(e,t.dest)}).map(function(t){return e.scope[t]}).map(function(t){return t?u.Just(new i.Config(u.extend({},e,t))):u.Nothing}).extract().reduce(function(e,t){return t},u.Nothing)}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../lib/router"),i=e("../../domain/data/config"),u=e("spica");n.scope=r},{"../../../lib/router":50,"../../domain/data/config":11,spica:void 0}],6:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../lib/error"),i=function(e){function t(t){return e.call(this,"Application: "+t)||this}return r(t,e),t}(o.PjaxError);n.ApplicationError=i},{"../../../lib/error":47}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../domain/store/path");n.loadTitle=r.loadTitle,n.savePosition=r.savePosition},{"../../domain/store/path":32}],8:[function(e,t,n){"use strict";function r(e){return e.replace(/(?:%\w{2})+/g,function(e){return e.toUpperCase()})}Object.defineProperty(n,"__esModule",{value:!0}),n.canonicalizeUrl=r},{}],9:[function(e,t,n){"use strict";function r(e){return e=e.trim(),e=e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[\uDC00-\uDFFF]/g,function(e){return 2===e.length?e:""}),o.href=e||location.href,e=o.href,e=e.replace(/%[0-9a-fA-F]{2}|[\uD800-\uDBFF][\uDC00-\uDFFF]|[^0-9a-zA-Z;\/?:@&=+$,\-_.!~*'()]/g,function(e){return e.startsWith("%")&&3===e.length?e:encodeURI(e)})}Object.defineProperty(n,"__esModule",{value:!0});var o=document.createElement("a");n.validateUrl=r},{}],10:[function(e,t,n){"use strict";function r(){return window.history.state.title||document.title}function o(){window.history.replaceState(c.extend(window.history.state||{},{title:document.title}),document.title)}function i(){return window.history.state.position||{top:window.pageYOffset,left:window.pageXOffset}}function u(){window.history.replaceState(c.extend(window.history.state||{},{position:{top:window.pageYOffset,left:window.pageXOffset}}),document.title)}Object.defineProperty(n,"__esModule",{value:!0});var c=e("spica");window.history.state instanceof Object==!1&&window.history.replaceState({},document.title),o(),u(),n.loadTitle=r,n.saveTitle=o,n.loadPosition=i,n.savePosition=u},{spica:void 0}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("spica"),o=e("../../../lib/url"),i=function(){function e(e){this.areas=["body"],this.link="a:not([target])",this.form="form:not([method])",this.replace="",this.fetch={timeout:3e3,wait:0},this.update={head:"base, meta, link",css:!0,script:!0,ignore:'[href^="chrome-extension://"], [src*=".scr.kaspersky-labs.com/"]',reload:"",logger:""},this.sequence=new u,this.balance={bounds:[""],weight:1,random:0,client:{hosts:[],support:{balance:/msie|trident.+ rv:|chrome|firefox|safari/i,redirect:/msie|trident.+ rv:|chrome|firefox|safari/i},cookie:{balance:"balanceable",redirect:"redirectable"}},server:{header:"X-Ajax-Host",expiry:2592e5}},this.store={expiry:108e5},this.progressbar="display:none;position:absolute;bottom:0;left:0;width:0;height:2px;background:rgb(40, 105, 255);",this.scope={"/":{}},r.extend(this,e),Object.freeze(this)}return e.prototype.filter=function(e){return"string"==typeof e.href&&/^https?:$/.test(new o.Url(e.href).protocol)},e.prototype.rewrite=function(e,t,n){},e.prototype.fallback=function(e,t){if(e instanceof HTMLAnchorElement)return void window.location.assign(e.href);if(e instanceof HTMLFormElement)return void window.location.assign(e.action);if(e instanceof Window)return void window.location.reload(!0);throw t},e}();n.Config=i;var u=function(){function e(){}return e.prototype.fetch=function(e,t){return Promise.resolve()},e.prototype.unload=function(e,t){return Promise.resolve()},e.prototype.ready=function(e){return Promise.resolve()},e.prototype.load=function(e){},e}()},{"../../../lib/url":51,spica:void 0}],12:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../lib/error"),i=function(e){function t(t){return e.call(this,"Domain: "+t)||this}return r(t,e),t}(o.PjaxError);n.DomainError=i},{"../../../lib/error":47}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../lib/url"),o=e("../../data/model/canonicalization/url"),i=e("../../data/model/validation/url"),u=e("../../../lib/dom"),c=e("../data/error"),a=function(){function e(t){this.original=t,this.source=this.original._currentTarget,this.type=this.original.type.toLowerCase(),this.request=new e.Request(this.source,this.type),this.location=new e.Location(this.request.url),Object.freeze(this)}return e}();n.RouterEvent=a,function(e){var t;!function(e){e.click="click",e.submit="submit",e.popstate="popstate"}(t=e.Type||(e.Type={}));var n;!function(e){e.GET="GET",e.POST="POST"}(n=e.Method||(e.Method={}));var a=function(){function e(e,r){var c=this;this.source=e,this.eventType=r,this.method=function(){switch(c.eventType){case t.click:return n.GET;case t.submit:return c.source.method.toUpperCase()===n.POST?n.POST:n.GET;case t.popstate:return n.GET;default:throw new TypeError}}(),this.url=function(){switch(c.eventType){case t.click:return o.canonicalizeUrl(i.validateUrl(c.source.href));case t.submit:return o.canonicalizeUrl(i.validateUrl(c.source.method.toUpperCase()===n.POST?c.source.action.split(/[?#]/).shift():c.source.action.split(/[?#]/).shift().concat("?"+u.serialize(c.source))));case t.popstate:return o.canonicalizeUrl(i.validateUrl(window.location.href));default:throw new TypeError}}(),this.data=this.method===n.POST?new FormData(this.source):null,Object.freeze(this)}return e}();e.Request=a;var s=function(){function e(e){if(this.target=e,this.orig=new r.Url(o.canonicalizeUrl(i.validateUrl(window.location.href))),this.dest=new r.Url(this.target),this.orig.domain!==this.dest.domain)throw new c.DomainError("Cannot go to the different domain url "+this.dest.href);Object.freeze(this)}return e}();e.Location=s}(a=n.RouterEvent||(n.RouterEvent={})),n.RouterEvent=a},{"../../../lib/dom":46,"../../../lib/url":51,"../../data/model/canonicalization/url":8,"../../data/model/validation/url":9,"../data/error":12}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./service/api"))},{"./service/api":29}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../event/router"),o=function(){function e(e,t,n){this.event=e,this.config=t,this.state=n,Object.freeze(this)}return e}();n.RouterEntity=o,function(e){e.Event=r.RouterEvent;var t=function(){function e(e,t){this.scripts=e,this.cancelable=t,Object.freeze(this)}return e}();e.State=t}(o=n.RouterEntity||(n.RouterEntity={})),n.RouterEntity=o},{"../../../event/router":13}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../../../../lib/html"),o=e("../../../../../data/model/canonicalization/url"),i=e("../../../../../data/model/validation/url"),u=function(){function e(e){this.xhr=e,this.response=new(function(){function e(e){this.xhr=e,this.url=this.xhr.responseURL?o.canonicalizeUrl(i.validateUrl(this.xhr.responseURL)):"",this.headers={},this.document="document"===this.xhr.responseType?this.xhr.responseXML:r.parse(this.xhr.responseText).extract();var t=/^[0-9a-zA-Z\-]+$/;this.xhr.getAllResponseHeaders().split("\n").filter(function(e){return e.indexOf(":")>0}).map(function(e){return[e.slice(0,e.indexOf(":")).trim(),e.slice(e.indexOf(":")+1).trim()]}).filter(function(e){var n=e[0];return t.test(n)}).reduce(function(e,t){var n=t[0],r=t[1];return e[n]=r,e},this.headers),Object.freeze(this.headers),Object.freeze(this)}return e}())(this.xhr),Object.freeze(this)}return e}();n.FetchValue=u},{"../../../../../../lib/html":48,"../../../../../data/model/canonicalization/url":8,"../../../../../data/model/validation/url":9}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e){this.documents=e,Object.freeze(this.documents),Object.freeze(this)}return e}();n.UpdateValue=r},{}],18:[function(e,t,n){"use strict";function r(e,t,n,r,i){function s(e,t,n){return void e.either(0).extract(n,t)}var l=new XMLHttpRequest,d=new Promise(function(e){return setTimeout(e,r.wait)});return new Promise(function(d){return l.open(e,t,!0),l.responseType=/chrome|firefox/i.test(window.navigator.userAgent)&&!/edge/i.test(window.navigator.userAgent)?"document":"text",l.timeout=r.timeout,l.setRequestHeader("X-Pjax","1"),l.send(n),l.addEventListener("abort",function(){return void s(i,function(){return void d(u.Left(new a.DomainError("Failed to request by abort.")))},function(e){return void d(u.Left(e))})}),l.addEventListener("error",function(){return void s(i,function(){return void d(u.Left(new a.DomainError("Failed to request by error.")))},function(e){return void d(u.Left(e))})}),l.addEventListener("timeout",function(){return void s(i,function(){return void d(u.Left(new a.DomainError("Failed to request by timeout.")))},function(e){return void d(u.Left(e))})}),l.addEventListener("load",function(){return void s(i,function(){return void o(l).extract(function(e){return void d(u.Left(e))},function(e){return void d(u.Right(new c.FetchValue(e)))})},function(e){return void d(u.Left(e))})}),void i.listeners.add(function(){return void l.abort()})}).then(function(e){return d.then(function(){return e})})}function o(e){return u.Right(e).bind(function(e){return/2..|304/.test(""+e.status)?u.Right(e):u.Left(new a.DomainError("Faild to validate a content type of response."))}).bind(function(e){return i(e.getResponseHeader("Content-Type"),s)?u.Right(e):u.Left(new a.DomainError("Faild to validate a content type of response."))})}function i(e,t){function n(e){return e.split(";").map(function(e){return e.trim()}).filter(function(e){return e.length>0})}return u.Sequence.intersect(u.Sequence.from(n(e||"").sort()),u.Sequence.from(n(t).sort()),function(e,t){return e.localeCompare(t)}).take(1).extract().length>0}Object.defineProperty(n,"__esModule",{value:!0});var u=e("spica"),c=e("../../model/eav/value/fetch"),a=e("../../../data/error"),s="text/html";n.xhr=r,n.match=i},{"../../../data/error":12,"../../model/eav/value/fetch":16,spica:void 0}],19:[function(e,t,n){"use strict";function r(e){e===window.document&&e.activeElement!==e.body&&(e.activeElement.blur(),e.body.focus())}Object.defineProperty(n,"__esModule",{value:!0}),n.blur=r},{}],20:[function(e,t,n){"use strict";function r(e,t,n){function r(t){function r(e){var t=s.find(e.src,"script").map(l.escape).reduce(function(e,t){return function(){return e(),void t()}},function(){});n.replace(e.src,e.dst),t()}return t.src.map(function(n,r){return{src:e.dst.importNode(t.src[r].cloneNode(!0),!0),dst:t.dst[r]}}).map(function(e){return r(e),s.find(e.src,"img, iframe, frame").map(c)}).reduce(a.concat,[])}return void 0===n&&(n={replace:function(e,t){return void t.parentNode.replaceChild(e,t)}}),o(e,t).fmap(function(e){return e[1].map(r).reduce(a.concat,[])}).fmap(function(t){return Promise.all(t).then(function(t){return[e,t]})})}function o(e,t){function n(e,t){function n(t){return function(e){return function(e){return e.src.length>0&&e.src.length===e.dst.length}(e)?a.Just(e):a.Nothing}(function(t){return{src:s.find(e.src,t),dst:s.find(e.dst,t)}}(t))}return u(t).reduce(function(e,t){return e.bind(function(e){return n(t).fmap(function(t){return a.concat(e,[t])})})},a.Just([]))}return t.reduce(function(t,r){return a.Maybe.mplus(t,n(e,r).fmap(function(e){return[r,e]}))},a.Nothing)}function i(e,t){function n(e,t){return u(t).reduce(function(t,n){return t.bind(function(){return s.find(e,n).length>0?t:a.Nothing})},a.Just(t))}return a.Sequence.from(t).bind(function(t){return a.Sequence.from(n(e,t).extract(function(){return[]},function(e){return[e]}))}).take(1).extract().length>0}function u(e){return(e.match(/(?:[^,\(\[]+|\(.*?\)|\[.*?\])+/g)||[]).map(function(e){return e.trim()})}function c(e){return Promise.race(["load","abort","error"].map(function(t){return new Promise(function(n){return void s.once(e,t,n)})}))}Object.defineProperty(n,"__esModule",{value:!0});var a=e("spica"),s=e("../../../../../lib/dom"),l=e("./script");n.content=r,n.separate=o,n.match=i,n._split=u,n._wait=c},{"../../../../../lib/dom":46,"./script":24,spica:void 0}],21:[function(e,t,n){"use strict";function r(e,t){var n='link[rel~="stylesheet"], style';return void u.sync(u.pair(i.find(e.src,n).filter(function(e){return!e.matches(t.trim()||"_")}),i.find(e.dst,n).filter(function(e){return!e.matches(t.trim()||"_")}),o),e.dst)}function o(e,t){switch(e.tagName.toLowerCase()){case"link":return e.href===t.href;case"style":return e.innerHTML.trim()===t.innerHTML.trim();default:return!1}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../../../lib/dom"),u=e("./sync");n.css=r},{"../../../../../lib/dom":46,"./sync":26}],22:[function(e,t,n){"use strict";function r(e){return void o.find(e,"body, [autofocus]").slice(-1).filter(function(t){return e===window.document&&t!==e.activeElement}).forEach(function(e){return void e.focus()})}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../../lib/dom");n.focus=r},{"../../../../../lib/dom":46}],23:[function(e,t,n){"use strict";function r(e,t,n){return n+=t.indexOf("link")>-1?', link[rel~="stylesheet"]':"",void i.sync(i.pair(u.find(e.src,t).filter(function(e){return!e.matches(n.trim()||"_")}),u.find(e.dst,t).filter(function(e){return!e.matches(n.trim()||"_")}),o),e.dst)}function o(e,t){return e.outerHTML===t.outerHTML}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./sync"),u=e("../../../../../lib/dom");n.head=r},{"../../../../../lib/dom":46,"./sync":26}],24:[function(require,module,exports){"use strict";function script(e,t,n,r,o){function i(t,i){return t.bind(r.either).bind(function(t){return o.evaluate(i).fmap(function(r){return r.parentElement.matches(n.logger.trim()||"_")&&o.log(r,e.dst),t.concat([r])})})}void 0===o&&(o={request:request,evaluate:evaluate,log:log});var u=dom_1.find(e.src,"script").filter(function(e){return!e.type||/(?:application|text)\/(?:java|ecma)script/i.test(e.type)}).filter(function(e){return!e.matches(n.ignore.trim()||"_")}).filter(function(e){return!e.hasAttribute("src")||(!t.has(url_1.canonicalizeUrl(url_2.validateUrl(e.src)))||e.matches(n.reload.trim()||"_"))});return new Promise(function(e,t){return void Promise.all(u.reduce(function(e,t){return spica_1.concat(e,[o.request(t)])},[])).then(function(e){return e.reduce(function(e,t){return t.bind(function(t){return i(e,t)})},spica_1.Right([]))}).then(e,t)})}function escape(e){var t=e.hasAttribute("src")?e.getAttribute("src"):null,n=e.innerHTML;return e.removeAttribute("src"),e.innerHTML="",function(){return e.innerHTML=" ",e.innerHTML=n,"string"==typeof t?void e.setAttribute("src",t):void 0}}function request(e){if(e.hasAttribute("src")){var t=new XMLHttpRequest;return t.open("GET",e.src,!0),t.send(),new Promise(function(n){return["load","abort","error","timeout"].forEach(function(r){switch(r){case"load":return void t.addEventListener(r,function(){return void n(spica_1.Right([e,t.response]))});default:return void t.addEventListener(r,function(){return void n(spica_1.Left(new Error(e.src+": "+t.statusText)))})}})})}return Promise.resolve(spica_1.Right([e,e.innerHTML]))}function evaluate(_a){var script=_a[0],code=_a[1];try{return eval(code),script.hasAttribute("src")&&script.dispatchEvent(new Event("load")),spica_1.Right(script)}catch(e){return script.hasAttribute("src")&&script.dispatchEvent(new Event("error")),spica_1.Left(e)}}function log(e,t){return dom_1.find(t,e.parentElement.id?"#"+e.parentElement.id:e.parentElement.tagName).slice(-1).reduce(function(n,r){e=t.importNode(e.cloneNode(!0),!0);var o=escape(e);return r.appendChild(e),o(),!0},!1)}Object.defineProperty(exports,"__esModule",{value:!0});var spica_1=require("spica"),dom_1=require("../../../../../lib/dom"),url_1=require("../../../../data/model/canonicalization/url"),url_2=require("../../../../data/model/validation/url");exports.script=script,exports.escape=escape,exports._request=request,exports._evaluate=evaluate,exports._log=log},{"../../../../../lib/dom":46,"../../../../data/model/canonicalization/url":8,"../../../../data/model/validation/url":9,spica:void 0}],25:[function(e,t,n){"use strict";function r(e,t,n,r){function i(e){var t=e.top,n=e.left;n=void 0===n||n>=0?n:window.pageXOffset,t=void 0===t||t>=0?t:window.pageYOffset,r.scroll.call(window,n,t)}switch(void 0===r&&(r={hash:o,scroll:window.scrollTo,position:function(){return{top:0,left:0}}}),e){case u.RouterEntity.Event.Type.click:return void(r.hash(t,n.hash,r)||i(n));case u.RouterEntity.Event.Type.submit:return void i(n);case u.RouterEntity.Event.Type.popstate:return void i(r.position());default:throw new TypeError(e)}}function o(e,t,n){return void 0===n&&(n={scroll:window.scrollTo}),i.Just(t.split("#").pop()||"").bind(function(e){return e.length>0?i.Just(e):i.Nothing}).bind(function(t){return c.find(e,"#"+t+', [name="'+t+'"]').reduce(function(e,t){return e.extract(function(){return i.Just(t)},i.Just)},i.Nothing)}).fmap(function(e){return void n.scroll.call(window,window.pageXOffset,window.pageYOffset+e.getBoundingClientRect().top|0)}).extract(function(){return!1},function(){return!0})}Object.defineProperty(n,"__esModule",{value:!0});var i=e("spica"),u=e("../../model/eav/entity"),c=e("../../../../../lib/dom");n.scroll=r,n.hash=o},{"../../../../../lib/dom":46,"../../model/eav/entity":15,spica:void 0}],26:[function(e,t,n){"use strict";function r(e,t,n){function r(e){return e?e.parentElement:t}return void 0===n&&(n={before:i,remove:u}),void e.forEach(function(e){var t=e[0],o=e[1];return n.before(r(o),t.slice(-1).some(function(e){return!!o&&e.outerHTML===o.outerHTML})?t.slice(0,-1):t,o),o&&0===t.length?void n.remove(o):void 0})}function o(e,t,n){var r=function(e,t,n){return e.reduce(function(e,r){return 0===t.length?e.set(null,c.concat(e.get(null)||[],[r])):t.reduce(function(e,t){return e.bind(function(e){return!e.has(t)&&n(r,t)?(e.set(t,c.concat(e.get(null)||[],[r])),e.delete(null),c.Left(e)):c.Right(e)})},c.Right(e)).fmap(function(e){return e.set(null,c.concat(e.get(null)||[],[r]))}).extract(function(e){return e})},new Map)}(e,t,n);return t.filter(function(e){return!r.has(e)}).forEach(function(e){return void r.set(e,[])}),Array.from(r.entries()).map(function(e){var t=e[0];return[e[1],t]})}function i(e,t,n){return void t.map(function(t){return e.ownerDocument.importNode(t.cloneNode(!0),!0)}).forEach(function(t){return void e.insertBefore(t,n)})}function u(e){return void e.remove()}Object.defineProperty(n,"__esModule",{value:!0});var c=e("spica");n.sync=r,n.pair=o},{spica:void 0}],27:[function(e,t,n){"use strict";function r(e){e.dst.title=e.src.title}Object.defineProperty(n,"__esModule",{value:!0}),n.title=r},{}],28:[function(e,t,n){"use strict";function r(e,t,n,r,u){switch(!0){case i(n,r,u):return void window.history.replaceState(null,t,e.dest.href);case o(n,e):return void window.history.pushState(null,t,e.dest.href);default:return}}function o(e,t){if(t.orig.href===t.dest.href)return!1;switch(e){case u.RouterEntity.Event.Type.click:case u.RouterEntity.Event.Type.submit:return!0;case u.RouterEntity.Event.Type.popstate:return!1;default:throw new TypeError(e)}}function i(e,t,n){switch(e){case u.RouterEntity.Event.Type.click:case u.RouterEntity.Event.Type.submit:return t.matches(n.trim()||"_");case u.RouterEntity.Event.Type.popstate:return!1;default:throw new TypeError(e)}}Object.defineProperty(n,"__esModule",{value:!0});var u=e("../../model/eav/entity");n.url=r,n._isRegisterable=o,n._isReplaceable=i},{"../../model/eav/entity":15}],29:[function(e,t,n){"use strict";function r(e,t){return Promise.resolve().then(function(){return a.match(t.document,e.config.areas)?e.state.cancelable.either(void 0):o.Left(new l.DomainError("Failed to match areas."))}).then(function(t){return t.bind(e.state.cancelable.either).fmap(function(){return u.fetch(e.event.request,e.config,e.state.cancelable)}).extract(o.Left)}).then(function(n){return n.bind(e.state.cancelable.either).fmap(function(n){var r=n[0],o=n[1];return c.update(e,r,o,{document:t.document,scroll:window.scrollTo,position:s.loadPosition})}).extract(function(e){return Promise.resolve(o.Left(e))})})}Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica"),i=e("../model/eav/entity");n.RouterEntity=i.RouterEntity;var u=e("./fetch/api"),c=e("./update/api"),a=e("../module/update/content"),s=e("../../store/path"),l=e("../../data/error");n.route=r},{"../../data/error":12,"../../store/path":32,"../model/eav/entity":15,"../module/update/content":20,"./fetch/api":30,"./update/api":31,spica:void 0}],30:[function(e,t,n){"use strict";function r(e,t,n){var r=e.method,a=e.url,s=e.data,l=t.fetch,d=t.sequence;return(new o.HNil).push(i.xhr(r,a,s,l,n)).modify(function(e){return window.dispatchEvent(new Event("pjax:fetch")),d.fetch(void 0,{host:"",path:new c.Url(a).path,method:r,data:s}).then(function(t){return e.then(function(e){return e.bind(function(e){return""===e.response.url||new c.Url(e.response.url).domain===new c.Url(a).domain?o.Right(e):o.Left(new u.DomainError("Request is redirected to the different domain url "+new c.Url(e.response.url).href))}).fmap(function(e){return[e,t]})})},function(e){return o.Left(e instanceof Error?e:new Error(e))})}).head()}Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica"),i=e("../../module/fetch/xhr"),u=e("../../../data/error"),c=e("../../../../../lib/url");n.fetch=r},{"../../../../../lib/url":51,"../../../data/error":12,"../../module/fetch/xhr":18,spica:void 0}],31:[function(e,t,n){"use strict";function r(e,t,n,r){var w=e.event,_=e.config,g=e.state,O=t.response,P=g.cancelable,E=new c.UpdateValue({src:O.document,dst:r.document}).documents;return(new i.HNil).push(Promise.resolve(P.either(n))).modify(function(e){return e.then(function(e){return e.bind(P.either).fmap(function(e){return f.separate(E,_.areas).fmap(function(e){var t=e[0];return void _.rewrite(E.src,t,"")}).extract(function(){return Promise.resolve(i.Left(new b.DomainError("Failed to separate areas.")))},function(){return window.dispatchEvent(new Event("pjax:unload")),_.sequence.unload(e,o({},O)).then(P.either,function(e){return i.Left(e instanceof Error?e:new Error(e))})})}).extract()})}).modify(function(e){return e.then(function(e){return e.bind(P.either).fmap(function(e){return(new i.HNil).push((a.blur(E.dst),s.url(new u.RouterEntity.Event.Location(O.url||w.location.dest.href),E.src.title,w.type,w.source,_.replace),l.title(E),y.saveTitle(),d.head({src:E.src.head,dst:E.dst.head},_.update.head,_.update.ignore),f.content(E,_.areas).extract(function(){return Promise.resolve(i.Left(new b.DomainError("Failed to update areas.")))},function(e){return e.then(P.either,function(e){return i.Left(e instanceof Error?e:new Error(e))})}))).extend(function(){return _.update.css&&p.css({src:E.src.head,dst:E.dst.head},_.update.ignore),_.update.css&&p.css({src:E.src.body,dst:E.dst.body},_.update.ignore),v.focus(E.dst),m.scroll(w.type,E.dst,{hash:w.location.dest.hash,top:0,left:0},{hash:m.hash,scroll:r.scroll,position:r.position}),y.savePosition(),_.update.script?h.script(E,g.scripts,_.update,P):Promise.resolve(P.either([]))}).extend(function(){return r.document.dispatchEvent(new Event("pjax:ready")),_.sequence.ready(e).then(P.either,i.Left)}).reverse().tuple()})})}).modify(function(e){return e.then(function(e){return e.bind(P.either).fmap(function(e){return e[0].then(function(t){return e[1].then(function(n){return e[2].then(function(e){return P.either(void 0).bind(function(){return t.bind(function(){return n}).bind(function(){return e})}).fmap(function(e){return window.dispatchEvent(new Event("pjax:load")),void _.sequence.load(e)}).bind(function(){return n})})})})}).extract()})}).head()}var o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(n,"__esModule",{value:!0});var i=e("spica"),u=e("../../model/eav/entity"),c=e("../../model/eav/value/update"),a=e("../../module/update/blur"),s=e("../../module/update/url"),l=e("../../module/update/title"),d=e("../../module/update/head"),f=e("../../module/update/content"),p=e("../../module/update/css"),h=e("../../module/update/script"),v=e("../../module/update/focus"),m=e("../../module/update/scroll"),y=e("../../../store/path"),b=e("../../../data/error");n.update=r},{"../../../data/error":12,"../../../store/path":32,"../../model/eav/entity":15,"../../model/eav/value/update":17,"../../module/update/blur":19,"../../module/update/content":20,"../../module/update/css":21,"../../module/update/focus":22,"../../module/update/head":23,"../../module/update/script":24,"../../module/update/scroll":25,"../../module/update/title":27,"../../module/update/url":28,spica:void 0}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("../../data/store/state"))},{"../../data/store/state":10}],33:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../lib/error"),i=function(e){function t(t){return e.call(this,"Interface: "+t)||this}return r(t,e),t}(o.PjaxError);n.InterfaceError=i},{"../../../lib/error":47}],34:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica"),i=e("../../../../lib/dom"),u=function(){function e(e,t,n){var u=this;this.sv=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Supervisor)),this.close=function(){return void u.sv.terminate()},this.sv.register("",function(){return u.sv.events.exit.once([],i.delegate(e.documentElement,t,"click",n)),new Promise(function(){})},void 0),this.sv.cast("",void 0)}return e}();n.ClickView=u},{"../../../../lib/dom":46,spica:void 0}],35:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica"),i=e("../../../data/model/canonicalization/url"),u=e("../../../data/model/validation/url"),c=e("../../../../lib/dom"),a=e("../../service/state/url"),s=function(){function e(e,t){var n=this;this.sv=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Supervisor)),this.close=function(){return void n.sv.terminate()},this.sv.register("",function(){return n.sv.events.exit.once([],c.bind(e,"popstate",function(e){i.canonicalizeUrl(u.validateUrl(location.href))!==a.documentUrl.href&&t(e)})),new Promise(function(){})},void 0),this.sv.cast("",void 0)}return e}();n.NavigationView=s},{"../../../../lib/dom":46,"../../../data/model/canonicalization/url":8,"../../../data/model/validation/url":9,"../../service/state/url":45,spica:void 0}],36:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica"),i=e("../../../../lib/dom"),u=function(){function e(e,t){var n=this;this.sv=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Supervisor)),this.close=function(){return void n.sv.terminate()};var u=0;this.sv.register("",function(){return n.sv.events.exit.once([],i.bind(e,"scroll",function(e){return u=u>0?u:setTimeout(function(){u=0,t(e)},300)},{passive:!0})),new Promise(function(){})},void 0),this.sv.cast("",void 0)}return e}();n.ScrollView=u},{"../../../../lib/dom":46,spica:void 0}],37:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("spica"),i=e("../../../../lib/dom"),u=function(){function e(e,t,n){var u=this;this.sv=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Supervisor)),this.close=function(){
return void u.sv.terminate()},this.sv.register("",function(){return u.sv.events.exit.once([],i.delegate(e.documentElement,t,"submit",n)),new Promise(function(){})},void 0),this.sv.cast("",void 0)}return e}();n.SubmitView=u},{"../../../../lib/dom":46,spica:void 0}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./gui");n.API=r.GUI},{"./gui":39}],39:[function(e,t,n){"use strict";function r(e){return window.history.scrollRestoration="manual",e.then(function(){return window.history.scrollRestoration="auto"}),e}function o(){return _.documentUrl.sync(),window.history.scrollRestoration="auto",Promise.resolve()}function i(e){return e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey}function u(e,t){return void 0===t&&(t=new f.Url(_.documentUrl.href)),t.domain===e.domain}function c(e,t){return void 0===t&&(t=new f.Url(_.documentUrl.href)),t.domain===e.domain&&t.path===e.path&&t.hash!==e.hash}function a(e){var t=document.createElement("a");return t.href=e,new Promise(function(e){return P.once(t,"click",function(t){return t.preventDefault(),void e(t)}),E.parse("").extract().body.appendChild(t),t.click(),void t.remove()})}var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=e("spica"),d=e("../../application/api"),f=e("../../../lib/url"),p=e("../../data/model/canonicalization/url"),h=e("../../data/model/validation/url"),v=e("../module/view/click"),m=e("../module/view/submit"),y=e("../module/view/navigation"),b=e("../module/view/scroll"),w=e("../service/state/initialization"),_=e("../service/state/url");e("../service/state/scroll-restoration");var g=e("../service/router"),O=e("../../application/api"),P=e("../../../lib/dom"),E=e("../../../lib/html"),j=function(){function e(t,n){void 0===n&&(n={document:window.document});var a=this;this.option=t,this.io=n,this.config=new d.Config(this.option),e.view.terminate(""),e.view.register("",{init:function(e){return e},call:function(t,s){var d=s.listeners;return d.add(new v.ClickView(a.io.document,a.config.link,function(t){return void l.Just(new f.Url(p.canonicalizeUrl(h.validateUrl(t._currentTarget.href)))).bind(function(e){return u(e)&&!c(e)&&!i(t)&&a.config.filter(t._currentTarget)?l.Just(0):l.Nothing}).fmap(function(){return t.preventDefault(),w.init.then(function(n){var r=n[0];return g.route(a.config,t,{router:e.router,scripts:r,cancelable:new l.Cancelable},a.io)})}).extract(o,r).catch(function(){return void window.location.assign(t._currentTarget.href)})}).close).add(new m.SubmitView(a.io.document,a.config.form,function(t){return void l.Just(new f.Url(p.canonicalizeUrl(h.validateUrl(t._currentTarget.action)))).bind(function(e){return u(e)&&!i(t)?l.Just(0):l.Nothing}).fmap(function(){return t.preventDefault(),w.init.then(function(n){var r=n[0];return g.route(a.config,t,{router:e.router,scripts:r,cancelable:new l.Cancelable},a.io)})}).extract(o,r).catch(function(){return void window.location.assign(t._currentTarget.action)})}).close).add(new y.NavigationView(window,function(t){return void l.Just(new f.Url(p.canonicalizeUrl(h.validateUrl(window.location.href)))).bind(function(e){return u(e)&&!c(e)?l.Just(O.loadTitle()):l.Nothing}).fmap(function(r){return r&&(n.document.title=r),w.init.then(function(n){var r=n[0];return g.route(a.config,t,{router:e.router,scripts:r,cancelable:new l.Cancelable},a.io)})}).extract(o,r).catch(function(){return void window.location.reload(!0)})}).close).add(new b.ScrollView(window,function(){return void l.Just(new f.Url(p.canonicalizeUrl(h.validateUrl(window.location.href)))).fmap(function(e){return _.documentUrl.href===e.href?void O.savePosition():void 0}).extract()}).close),new Promise(function(e){return void d.add(e)})},exit:function(e,t){return void t.cancel()}},new l.Cancelable),e.view.cast("",void 0)}return e.assign=function(t,n,i){return void 0===i&&(i={document:window.document}),void a(t).then(function(t){return w.init.then(function(r){var o=r[0];return g.route(new d.Config(n),t,{router:e.router,scripts:o,cancelable:new l.Cancelable},i)})}).then(o,r).catch(function(){return void window.location.assign(t)})},e.replace=function(t,n,i){return void 0===i&&(i={document:window.document}),void a(t).then(function(t){return w.init.then(function(r){var o=r[0];return g.route(new d.Config(l.extend({},n,{replace:"*"})),t,{router:e.router,scripts:o,cancelable:new l.Cancelable},i)})}).then(o,r).catch(function(){return void window.location.replace(t)})},e.prototype.assign=function(t){return void e.assign(t,this.option,this.io)},e.prototype.replace=function(t){return void e.replace(t,this.option,this.io)},e}();j.router=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(l.Supervisor)),j.view=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(l.Supervisor)),n.GUI=j},{"../../../lib/dom":46,"../../../lib/html":48,"../../../lib/url":51,"../../application/api":4,"../../data/model/canonicalization/url":8,"../../data/model/validation/url":9,"../module/view/click":34,"../module/view/navigation":35,"../module/view/scroll":36,"../module/view/submit":37,"../service/router":41,"../service/state/initialization":42,"../service/state/scroll-restoration":44,"../service/state/url":45,spica:void 0}],40:[function(e,t,n){"use strict";function r(e){o.setAttribute("style",e)}Object.defineProperty(n,"__esModule",{value:!0});var o=document.createElement("div");window.addEventListener("pjax:fetch",function(){return void document.documentElement.appendChild(o)}),window.addEventListener("pjax:fetch",function(){return o.style.width="5%"}),window.addEventListener("pjax:unload",function(){return o.style.width="80%"}),document.addEventListener("pjax:ready",function(){return o.style.width="90%"}),window.addEventListener("pjax:load",function(){return o.style.width="100%"}),window.addEventListener("pjax:load",function(){return void o.remove()}),n.progressbar=r},{}],41:[function(e,t,n){"use strict";function r(e,t,n,r){return n.router.cast("",new s.InterfaceError("Abort.")),n.router.register("",function(e){throw void n.cancelable.cancel(e)},void 0),a.progressbar(e.progressbar),o.route(e,t,n,r).then(function(e){return n.router.terminate(""),void e.bind(n.cancelable.either).fmap(function(e){return e.forEach(function(e){return void n.scripts.add(i.canonicalizeUrl(u.validateUrl(e.src)))}),void c.documentUrl.sync()}).extract()}).catch(function(r){return n.router.terminate(""),void n.cancelable.maybe(void 0).extract(function(){},function(){return console.error(r),void Promise.reject(e.fallback(t._currentTarget,r))})})}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../application/api"),i=e("../../data/model/canonicalization/url"),u=e("../../data/model/validation/url"),c=e("./state/url"),a=e("./progressbar"),s=e("../data/error");n.route=r},{"../../application/api":4,"../../data/model/canonicalization/url":8,"../../data/model/validation/url":9,"../data/error":33,"./progressbar":40,"./state/url":45}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./script");n.init=new Promise(setTimeout).then(function(){return Promise.all([r.scripts])})},{"./script":43}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../data/model/canonicalization/url"),o=e("../../../data/model/validation/url"),i=e("../../../../lib/dom");n.scripts=new Promise(setTimeout).then(function(){return i.find(document,"script").filter(function(e){return e.hasAttribute("src")}).reduce(function(e,t){return e.add(r.canonicalizeUrl(o.validateUrl(t.src)))},new Set)})},{"../../../../lib/dom":46,"../../../data/model/canonicalization/url":8,"../../../data/model/validation/url":9}],44:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("../../../../lib/dom").bind(window,"unload",function(){return window.history.scrollRestoration="auto"},!1)},{"../../../../lib/dom":46}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../data/model/canonicalization/url"),o=e("../../../data/model/validation/url");n.documentUrl=new(function(){function e(){this.href=r.canonicalizeUrl(o.validateUrl(location.href))}return e.prototype.sync=function(){return this.href=r.canonicalizeUrl(o.validateUrl(location.href))},e}())},{"../../../data/model/canonicalization/url":8,"../../../data/model/validation/url":9}],46:[function(e,t,n){"use strict";function r(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild?t.firstElementChild:t}function o(e,t){return Array.from(e.querySelectorAll(t||"_")||[])}function i(e,t,n,r){function o(e){e._currentTarget=e.currentTarget,"object"==typeof r&&r.passive&&(e.preventDefault=d.noop),n(e)}void 0===r&&(r=!1),e.addEventListener(t,o,s(r));var i=function(){return i=d.noop,void e.removeEventListener(t,o,s(r))};return function(){return void i()}}function u(e,t,n,r){void 0===r&&(r=!1);var o=i(e,t,function(e){return o(),o=d.noop,void n(e)},r);return function(){return void o()}}function c(e,t,n,r,c){return void 0===c&&(c={capture:!0}),i(e,n,function(i){var a=i.target.closest(t);a&&o(e,t).filter(function(e){return e===a}).forEach(function(e){return void u(e,n,function(e){return e._currentTarget=e.currentTarget,void r(e)},c)})},l({},c,{capture:!0}))}function a(e){return Array.from(e.elements).filter(function(e){return e.name&&!e.disabled&&(e.checked||!/^(?:checkbox|radio)$/i.test(e.type))&&/^(?:input|select|textarea|keygen)/i.test(e.nodeName)&&!/^(?:submit|button|image|reset|file)$/i.test(e.type)}).map(function(e){return[encodeURIComponent(e.name),encodeURIComponent(null===e.value?"":e.value.replace(/\r?\n/g,"\r\n"))].join("=")}).join("&")}function s(e){return f?e:"boolean"==typeof e?e:e.capture}var l=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(n,"__esModule",{value:!0});var d=e("./noop");n.parse=r,n.find=o,n.bind=i,n.once=u,n.delegate=c,n.serialize=a;var f=!1;try{document.createElement("div").addEventListener("test",function(){},{get capture(){return f=!0}})}catch(e){}},{"./noop":49}],47:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,"Pjax: "+t)||this}return r(t,e),t}(Error);n.PjaxError=o},{}],48:[function(e,t,n){"use strict";function r(e){var t=(new DOMParser).parseFromString(e,"text/html");return i(t),t}function o(e){var t=window.document.implementation.createHTMLDocument(""),n=s.find(s.parse(e.slice(0,e.search(/<\/title>/i)+8)),"title").reduce(function(e,t){return t.textContent||e},"");return"function"==typeof DOMParser&&(t.title=n),t.open(),t.write(e),t.close(),t.title!==n&&(t.title=t.querySelector("title").textContent||""),i(t),t}function i(e){return void u(e).forEach(function(e){var t=e[0],n=e[1];return t.textContent=n.textContent})}function u(e){return s.find(e,"noscript").filter(function(e){return e.children.length>0}).map(function(e){var t=e.cloneNode(!0);return t.textContent=e.innerHTML,[e,t]})}function c(e){try{var t=e('\n<html lang="en" class="html">\n  <head>\n    <link href="/">\n    <title>&amp;</title>\n    <noscript><style>/**/</style></noscript>\n  </head>\n  <body>\n    <noscript>noscript</noscript>\n    <a href="/"></a>\n    <script>document.head.remove();<\/script>\n  </body>\n</html>\n');switch(!1){case t.URL&&t.URL.startsWith(window.location.protocol+"//"+window.location.host):case"&"===t.title:case!!t.querySelector('html.html[lang="en"]'):case!!t.querySelector("head>link").href:case!!t.querySelector("body>a").href:case!t.querySelector("head>noscript>*"):case"document.head.remove();"===t.querySelector("script").innerHTML:case"<style>/**/</style>"===t.querySelector("head>noscript").textContent:case"noscript"===t.querySelector("body>noscript").textContent:throw void 0}return!0}catch(e){return!1}}Object.defineProperty(n,"__esModule",{value:!0});var a=e("spica"),s=e("./dom");n.parse=[o,r].reduce(function(e,t){return e.bind(function(){return c(t)?a.Left(t):e})},a.Right(function(){return a.Nothing})).extract(function(e){return function(t){return a.Just(e(t))}}),n._fixNoscript=u},{"./dom":46,spica:void 0}],49:[function(e,t,n){"use strict";function r(){}Object.defineProperty(n,"__esModule",{value:!0}),n.noop=r},{}],50:[function(e,t,n){"use strict";function r(e){return function(t){var n=new s.Url(c.canonicalizeUrl(a.validateUrl(t))),r=n.path,i=n.pathname;return l.Sequence.from(Object.keys(e).sort().reverse()).filter(l.flip(o)(i)).map(function(t){return e[t]}).take(1).extract().pop()(r)}}function o(e,t){return l.Sequence.zip(l.Sequence.from(i(e)),l.Sequence.cycle([t])).map(function(e){var t=e[0],n=e[1];return[t.match(/\/|[^\/]+\/?/g)||[],t.match(/\/(?=$|[?#])/)?n.match(/\/|[^\/]+\/?/g)||[]:n.replace(/\/(?=$|[?#])/,"").match(/\/|[^\/]+\/?/g)||[]]}).filter(function(e){var t=e[0],n=e[1];return t.length<=n.length}).filter(function(e){var t=e[0],n=e[1];return l.Sequence.zip(l.Sequence.from(t),l.Sequence.from(n)).takeWhile(function(e){return u(e[0],e[1])}).extract().length===t.length}).take(1).extract().length>0}function i(e){return l.Sequence.from((e.match(/{.*?}|[^{]*/g)||[]).map(function(e){return"{"===e[0]?e.slice(1,-1).split(","):[e]})).mapM(l.Sequence.from).map(function(e){return e.join("")}).extract()}function u(e,t){e=e.replace(/[*]+/g,"*").replace(/[*]+[?]/g,"?");var n=Array.from(e).map(function(t,n){return"*"===t?[t,e.slice(n+1).match(/^[^?*\/]*/)[0]]:[t,""]}).reduce(function(e,t){var n=e[0],r=e[1],o=r[0],i=void 0===o?"":o,u=r.slice(1),c=e[2],a=t[0],s=t[1];if(!c)return[n,[i].concat(u),c];switch(a){case"?":return[n.concat([i]),u,c];case"*":var l=i.concat(u.join("")),d=s.split(/[?*]/,1)[0];return l.includes(d)?""===d?[n.concat(Array.from(l.replace(/\/$/,""))),Array.from(l.replace(/.*?(?=\/?$)/,"")),c]:[n.concat(Array.from(l.slice(0,l.indexOf(d)))),Array.from(l.slice(l.indexOf(d))),c]:[n,[i].concat(u),!c];default:return i===a?[n.concat([i]),u,c]:[n,[i].concat(u),!c]}},[Array.from(""),Array.from(t),!0]),r=n[1],o=n[2];return 0===r.length&&o}Object.defineProperty(n,"__esModule",{value:!0});var c=e("../layer/data/model/canonicalization/url"),a=e("../layer/data/model/validation/url"),s=e("./url"),l=e("spica");n.router=r,n.compare=o,n.expand=i,n.match=u},{"../layer/data/model/canonicalization/url":8,"../layer/data/model/validation/url":9,"./url":51,spica:void 0}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e){this.parser=document.createElement("a"),this.URL,this.parser.href=e||location.href,this.parser.setAttribute("href",this.parser.href)}return Object.defineProperty(e.prototype,"href",{get:function(){return this.parser.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"domain",{get:function(){return this.protocol+"//"+this.host},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this.parser.protocol},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"host",{get:function(){return this.parser.host},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hostname",{get:function(){return this.parser.hostname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"port",{get:function(){return this.parser.port},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return""+this.pathname+this.query},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dir",{get:function(){return this.pathname.split("/").slice(0,-1).concat("").join("/")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"file",{get:function(){return this.pathname.split("/").pop()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathname",{get:function(){return("/"===this.parser.pathname[0]?"":"/")+this.parser.pathname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"query",{get:function(){return this.parser.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.parser.hash},enumerable:!0,configurable:!0}),e}();n.Url=r},{}],"pjax-api":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./src/export"));var r=e("./src/export");n.default=r.default},{"./src/export":3}]},{},[1,2,"pjax-api"]);