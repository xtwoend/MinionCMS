/*! spica v0.0.63 https://github.com/falsandtru/spica | (c) 2016, falsandtru | MIT License */
require=function e(t,n,r){function o(i,c){if(!n[i]){if(!t[i]){var a="function"==typeof require&&require;if(!c&&a)return a(i,!0);if(u)return u(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[i]={exports:{}};t[i][0].call(f.exports,function(e){var n=t[i][1][e];return o(n||e)},f,f.exports,e,t,n,r)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){},{}],2:[function(e,t,n){arguments[4][1][0].apply(n,arguments)},{dup:1}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./lib/supervisor");n.Supervisor=r.Supervisor;var o=e("./lib/observable");n.Observable=o.Observable;var u=e("./lib/cancelable");n.Cancelable=u.Cancelable;var i=e("./lib/monad/sequence");n.Sequence=i.Sequence;var c=e("./lib/monad/maybe");n.Maybe=c.Maybe,n.Just=c.Just,n.Nothing=c.Nothing;var a=e("./lib/monad/either");n.Either=a.Either,n.Left=a.Left,n.Right=a.Right;var s=e("./lib/curry");n.curry=s.curry;var f=e("./lib/flip");n.flip=f.flip;var p=e("./lib/list");n.Nil=p.Nil;var l=e("./lib/hlist");n.HNil=l.HNil;var h=e("./lib/collection/datamap");n.DataMap=h.DataMap;var v=e("./lib/collection/attrmap");n.AttrMap=v.AttrMap;var y=e("./lib/cache");n.Cache=y.Cache;var d=e("./lib/mixin");n.Mixin=d.Mixin;var _=e("./lib/tick");n.Tick=_.Tick;var b=e("./lib/uuid");n.uuid=b.v4;var m=e("./lib/sqid");n.sqid=m.sqid;var q=e("./lib/assign");n.assign=q.assign,n.clone=q.clone,n.extend=q.extend;var S=e("./lib/concat");n.concat=S.concat;var O=e("./lib/sort");n.sort=O.sort},{"./lib/assign":4,"./lib/cache":5,"./lib/cancelable":6,"./lib/collection/attrmap":7,"./lib/collection/datamap":8,"./lib/concat":10,"./lib/curry":11,"./lib/flip":12,"./lib/hlist":13,"./lib/list":14,"./lib/mixin":15,"./lib/monad/either":18,"./lib/monad/maybe":22,"./lib/monad/sequence":25,"./lib/observable":70,"./lib/sort":71,"./lib/sqid":72,"./lib/supervisor":74,"./lib/tick":76,"./lib/uuid":78}],4:[function(e,t,n){"use strict";function r(e){function t(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(void 0===t||null===t)throw new TypeError("Spica: assign: Cannot walk on "+t+".");for(var o=0,u=n;o<u.length;o++){var i=u[o];if(void 0!==i&&null!==i)for(var c=0,a=Object.keys(Object(i));c<a.length;c++){var s=a[c],f=Object.getOwnPropertyDescriptor(Object(i),s);void 0!==f&&f.enumerable&&e(s,Object(t),Object(i))}}return Object(t)}return t}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./type");n.assign=r(function(e,t,n){return t[e]=n[e]}),n.clone=r(function(e,t,r){switch(o.type(r[e])){case"Array":return t[e]=n.clone([],r[e]);case"Object":return t[e]=n.clone({},r[e]);default:return t[e]=r[e]}}),n.extend=r(function(e,t,r){switch(o.type(r[e])){case"Array":return t[e]=n.extend([],r[e]);case"Object":switch(o.type(t[e])){case"Function":case"Object":return t[e]=n.extend(t[e],r[e]);default:return t[e]=n.extend({},r[e])}default:return t[e]=r[e]}})},{"./type":77}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){if(void 0===t&&(t=function(){}),this.size=e,this.callback=t,this.store=new Map,this.stats={LRU:[],LFU:[]},e>0==!1)throw new Error("Spica: Cache: Cache size must be greater than 0.")}return e.prototype.put=function(e,t){if(e!==e)throw new TypeError("Spica: Cache: Cannot use NaN for key.");if(this.access(e))return this.store.set(e,t),!0;var n=this.stats,r=n.LRU,o=n.LFU;if(r.length+o.length===this.size&&r.length<o.length){var u=o.pop(),i=this.store.get(u);this.store.delete(u),this.callback(u,i)}if(r.unshift(e),this.store.set(e,t),r.length+o.length>this.size){var c=r.pop(),i=this.store.get(c);this.store.delete(c),this.callback(c,i)}return!1},e.prototype.get=function(e){return this.access(e),this.store.get(e)},e.prototype.has=function(e){return this.store.has(e)},e.prototype.delete=function(e){for(var t=this.stats,n=t.LRU,r=t.LFU,o=0,u=[r,n];o<u.length;o++){var i=u[o],c=i.indexOf(e);if(-1!==c){var a=this.store.get(e);return this.store.delete(i.splice(c,1)[0]),this.callback(e,a),!0}}return!1},e.prototype.clear=function(){for(var e=this.stats,t=e.LRU,n=e.LFU,r=0,o=[n,t];r<o.length;r++)for(var u=o[r];u.length>0;){var i=u.shift(),c=this.store.get(i);this.store.delete(i),this.callback(i,c)}},e.prototype[Symbol.iterator]=function(){return this.store[Symbol.iterator]()},e.prototype.inspect=function(){var e=this.stats;return[e.LRU,e.LFU]},e.prototype.access=function(e){return this.accessLRU(e)||this.accessLFU(e)},e.prototype.accessLRU=function(e){var t=this.stats.LRU,n=t.indexOf(e);if(-1===n)return!1;var r=this.stats.LFU;return r.unshift.apply(r,t.splice(n,1)),!0},e.prototype.accessLFU=function(e){var t=this.stats.LFU,n=t.indexOf(e);return-1!==n&&(t.unshift.apply(t,t.splice(n,1)),!0)},e}();n.Cache=r},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./noop"),o=e("./monad/maybe"),u=e("./monad/either"),i=function(){function e(){var e=this;this.listeners=new Set,this.canceled=!1,this.cancel=function(t){for(e.cancel=r.noop,e.canceled=!0,e.reason=t,Object.freeze(e);e.listeners.size>0;)e.listeners.forEach(function(n){return e.listeners.delete(n),void n(t)});e.listeners.add=function(t){return t(e.reason),e.listeners}},this.promise=function(t){return e.canceled?new Promise(function(t,n){return void n(e.reason)}):Promise.resolve(t)},this.maybe=function(t){return e.canceled?o.Nothing:o.Just(t)},this.either=function(t){return e.canceled?u.Left(e.reason):u.Right(t)}}return e}();n.Cancelable=i},{"./monad/either":18,"./monad/maybe":22,"./noop":69}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t,n){void 0===e&&(e=[]),void 0===t&&(t=WeakMap),void 0===n&&(n=Map);var r=this;this.KeyMap=t,this.ValueMap=n,this.store=new this.KeyMap,Array.from(e).forEach(function(e){var t=e[0],n=e[1],o=e[2];return void r.set(t,n,o)})}return e.prototype.get=function(e,t){return this.store.get(e)&&this.store.get(e).get(t)},e.prototype.set=function(e,t,n){return(this.store.has(e)?this.store.get(e):this.store.set(e,new this.ValueMap).get(e)).set(t,n),this},e.prototype.has=function(e,t){return 1===arguments.length?this.store.has(e):this.store.has(e)&&this.store.get(e).has(t)},e.prototype.delete=function(e,t){return 1===arguments.length?this.store.delete(e):!!this.store.has(e)&&this.store.get(e).delete(t)},e}();n.AttrMap=r},{}],8:[function(e,t,n){"use strict";function r(e){return e instanceof Object==!1}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../sqid"),u=e("../type"),i=function(){function e(e){void 0===e&&(e=[]);var t=this;this.store=new Map,this.weakstore=new WeakMap,Array.from(e).forEach(function(e){var n=e[0],r=e[1];return void t.set(n,r)})}return e.prototype.stringify=function(e){switch(typeof e){case"undefined":return"0:"+e;case"boolean":return"1:"+e;case"number":return"2:"+(1e3+(""+e).length)+":"+e;case"string":return"3:"+(1e14+e.length)+":"+e;default:return r(e)?"8:"+e:Array.isArray(e)?"9:[ "+this.stringifyArray(e)+" ]":"9:{ "+(this.stringifyObject(e)||this.weakstore.get(e)||this.weakstore.set(e,o.sqid()).get(e))+" }"}},e.prototype.stringifyArray=function(e){for(var t="",n=0,r=e;n<r.length;n++){var o=r[n];t+=""+this.stringify(o)}return t},e.prototype.stringifyObject=function(e){if("Object"!==u.type(e))return"";for(var t=Object.keys(e),n="",r=0,o=t;r<o.length;r++){var i=o[r];n+=this.stringify(i)+": "+this.stringify(e[i])}return n||" "},e.prototype.get=function(e){return(this.store.get(this.stringify(e))||[])[1]},e.prototype.set=function(e,t){return this.store.set(this.stringify(e),[e,t]),this},e.prototype.has=function(e){return this.store.has(this.stringify(e))},e.prototype.delete=function(e){return this.store.delete(this.stringify(e))},e.prototype.clear=function(){return this.store.clear()},Object.defineProperty(e.prototype,"size",{get:function(){return this.store.size},enumerable:!0,configurable:!0}),e}();n.DataMap=i},{"../sqid":72,"../type":77}],9:[function(e,t,n){"use strict";function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(e,t){o.assign(e.prototype,t.prototype);for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},e)}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./assign");n.compose=r},{"./assign":4}],10:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=t.length,o=e.length;n<r;++n)e[n+o]=t[n];return e}Object.defineProperty(n,"__esModule",{value:!0}),n.concat=r},{}],11:[function(e,t,n){"use strict";function r(e,t,n){return e.length<=t.length?e.apply(n,t.slice(0,e.length)):function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return r(e,t.concat(o),n)}}Object.defineProperty(n,"__esModule",{value:!0}),n.curry=function(e,t){return 0===e.length?function(){return e.call(t)}:r(e,[],t)}},{}],12:[function(e,t,n){"use strict";function r(e){return o.curry(function(t,n){return e.length>1?e(n,t):e(n)(t)})}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./curry");n.flip=r},{"./curry":11}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./concat"),o=function(){function e(){this.NIL}return e.prototype.push=function(e){return new u(e,this)},e.prototype.array=function(){return[]},e}();n.HNil=o;var u=function(){function e(e,t){this.head_=e,this.tail_=t,this.CONS}return e.prototype.push=function(t){return new e(t,this)},e.prototype.head=function(){return this.head_},e.prototype.tail=function(){return this.tail_},e.prototype.walk=function(e){return e(this.head()),this.tail()},e.prototype.modify=function(e){return this.tail().push(e(this.head()))},e.prototype.extend=function(e){return this.push(e(this.head()))},e.prototype.compact=function(e){var t=this;return this.tail().modify(function(n){return e(t.head(),n)})},e.prototype.reverse=function(){return this.array().reduce(function(e,t){return e.push(t)},new o)},e.prototype.tuple=function(){return this.array()},e.prototype.array=function(){return r.concat([this.head()],this.tail().array())},e}()},{"./concat":10}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./concat"),o=function(){function e(){this.NIL}return e.prototype.push=function(e){return new u(e,this)},e.prototype.array=function(){return[]},e}();n.Nil=o;var u=function(){function e(e,t){this.head_=e,this.tail_=t,this.CONS}return e.prototype.push=function(t){return new e(t,this)},e.prototype.head=function(){return this.head_},e.prototype.tail=function(){return this.tail_},e.prototype.walk=function(e){return e(this.head()),this.tail()},e.prototype.modify=function(e){return this.tail().push(e(this.head()))},e.prototype.extend=function(e){return this.push(e(this.head()))},e.prototype.compact=function(e){var t=this;return this.tail().modify(function(n){return e(t.head(),n)})},e.prototype.reverse=function(){return this.array().reduce(function(e,t){return e.push(t)},new o)},e.prototype.tuple=function(){return this.array()},e.prototype.array=function(){return r.concat([this.head()],this.tail().array())},e}()},{"./concat":10}],15:[function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduceRight(function(e,t){return o(t,e)},function(){function e(){}return e}())}function o(e,t){var n=function(){function n(){return e.call(t.call(this)||this)}return n}();u.assign(n.prototype,e.prototype,t.prototype);for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}Object.defineProperty(n,"__esModule",{value:!0});var u=e("./assign");n.Mixin=r},{"./assign":4}],16:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./functor"),u=e("../curry"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Functor);n.Applicative=i,function(e){function t(e,n){return n?e.bind(function(e){return n.fmap(function(t){return 0===e.length?e(t):u.curry(e)(t)})}):function(n){return t(e,n)}}e.ap=t}(i=n.Applicative||(n.Applicative={})),n.Applicative=i},{"../curry":11,"./functor":19}],17:[function(e,t,n){"use strict";function r(){throw new Error("Spica: Either: Invalid thunk call.")}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("./monad"),i=function(e){function t(t){var n=e.call(this,t)||this;return n.EITHER,n}return o(t,e),t.prototype.fmap=function(e){return this.bind(function(t){return new a(e(t))})},t.prototype.ap=function(e){return t.ap(this,e)},t.prototype.bind=function(e){var n=this;return new t(function(){var r=n.evaluate();if(r instanceof c)return r;if(r instanceof a)return e(r.extract());if(r instanceof t)return r.bind(e);throw new TypeError("Spica: Either: Invalid monad value.\n\t"+r)})},t.prototype.extract=function(e,t){return t?this.fmap(t).extract(e):this.evaluate().extract(e)},t}(u.Monad);n.Either=i,function(e){function t(e){return new a(e)}e.pure=t,e.Return=t}(i=n.Either||(n.Either={})),n.Either=i;var c=function(e){function t(t){var n=e.call(this,r)||this;return n.a=t,n.LEFT,n}return o(t,e),t.prototype.bind=function(e){return this},t.prototype.extract=function(e){if(!e)throw this.a;return e(this.a)},t}(i);n.Left=c;var a=function(e){function t(t){var n=e.call(this,r)||this;return n.b=t,n.RIGHT,n}return o(t,e),t.prototype.bind=function(e){var t=this;return new i(function(){return e(t.extract())})},t.prototype.extract=function(e,t){return t?t(this.b):this.b},t}(i);n.Right=a},{"./monad":23}],18:[function(e,t,n){"use strict";function r(e){return new u.Left(e)}function o(e){return new u.Right(e)}Object.defineProperty(n,"__esModule",{value:!0});var u=e("./either.impl");!function(e){e.fmap=u.Either.fmap,e.pure=u.Either.pure,e.ap=u.Either.ap,e.Return=u.Either.Return,e.bind=u.Either.bind}(n.Either||(n.Either={})),n.Left=r,n.Right=o},{"./either.impl":17}],19:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./lazy"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Lazy);n.Functor=u,function(e){function t(e,t){return t?e.fmap(t):function(t){return e.fmap(t)}}e.fmap=t}(u=n.Functor||(n.Functor={})),n.Functor=u},{"./lazy":20}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e){this.thunk=e}return e.prototype.evaluate=function(){return this.memory_=this.memory_||this.thunk()},e}();n.Lazy=r},{}],21:[function(e,t,n){"use strict";function r(){throw new Error("Spica: Maybe: Invalid thunk call.")}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("./monadplus"),i=function(e){function t(t){var n=e.call(this,t)||this;return n.MAYBE,n}return o(t,e),t.prototype.fmap=function(e){return this.bind(function(t){return new c(e(t))})},t.prototype.ap=function(e){return t.ap(this,e)},t.prototype.bind=function(e){var n=this;return new t(function(){var r=n.evaluate();if(r instanceof c)return e(r.extract());if(r instanceof a)return r;if(r instanceof t)return r.bind(e);throw new TypeError("Spica: Maybe: Invalid monad value.\n\t"+r)})},t.prototype.extract=function(e,t){return t?this.fmap(t).extract(e):this.evaluate().extract(e)},t}(u.MonadPlus);n.Maybe=i,function(e){function t(e){return new c(e)}e.pure=t,e.Return=t}(i=n.Maybe||(n.Maybe={})),n.Maybe=i;var c=function(e){function t(t){var n=e.call(this,r)||this;return n.a=t,n.JUST,n}return o(t,e),t.prototype.bind=function(e){var t=this;return new i(function(){return e(t.extract())})},t.prototype.extract=function(e,t){return t?t(this.a):this.a},t}(i);n.Just=c;var a=function(e){function t(){var t=e.call(this,r)||this;return t.NOTHING,t}return o(t,e),t.prototype.bind=function(e){return this},t.prototype.extract=function(e){if(!e)throw void 0;return e()},t}(i);n.Nothing=a,function(e){function t(t,n){return new e(function(){return t.fmap(function(){return t}).extract(function(){return n})})}e.mzero=new a,e.mplus=t}(i=n.Maybe||(n.Maybe={})),n.Maybe=i},{"./monadplus":24}],22:[function(e,t,n){"use strict";function r(e){return new o.Just(e)}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./maybe.impl");!function(e){e.fmap=o.Maybe.fmap,e.pure=o.Maybe.pure,e.ap=o.Maybe.ap,e.Return=o.Maybe.Return,e.bind=o.Maybe.bind,e.mzero=o.Maybe.mzero,e.mplus=o.Maybe.mplus}(n.Maybe||(n.Maybe={})),n.Just=r,n.Nothing=o.Maybe.mzero},{"./maybe.impl":21}],23:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./applicative"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Applicative);n.Monad=u,function(e){function t(e,n){return n?e.bind(n):function(n){return t(e,n)}}e.bind=t}(u=n.Monad||(n.Monad={})),n.Monad=u},{"./applicative":16}],24:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./monad"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Monad);n.MonadPlus=u,u=n.MonadPlus||(n.MonadPlus={}),n.MonadPlus=u},{"./monad":23}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./sequence/core");n.Sequence=r.Sequence;var o=e("./sequence/member/static/resume"),u=e("./sequence/member/static/from"),i=e("./sequence/member/static/cycle"),c=e("./sequence/member/static/random"),a=e("./sequence/member/static/concat"),s=e("./sequence/member/static/zip"),f=e("./sequence/member/static/difference"),p=e("./sequence/member/static/union"),l=e("./sequence/member/static/intersect"),h=e("./sequence/member/static/pure"),v=e("./sequence/member/static/return"),y=e("./sequence/member/static/mempty"),d=e("./sequence/member/static/mconcat"),_=e("./sequence/member/static/mappend"),b=e("./sequence/member/static/mzero"),m=e("./sequence/member/static/mplus"),q=e("./sequence/member/instance/extract"),S=e("./sequence/member/instance/iterate"),O=e("./sequence/member/instance/memoize"),w=e("./sequence/member/instance/reduce"),j=e("./sequence/member/instance/take"),P=e("./sequence/member/instance/drop"),g=e("./sequence/member/instance/takeWhile"),k=e("./sequence/member/instance/dropWhile"),M=e("./sequence/member/instance/takeUntil"),x=e("./sequence/member/instance/dropUntil"),T=e("./sequence/member/instance/sort"),A=e("./sequence/member/instance/fmap"),I=e("./sequence/member/instance/ap"),E=e("./sequence/member/instance/bind"),N=e("./sequence/member/instance/mapM"),z=e("./sequence/member/instance/filterM"),L=e("./sequence/member/instance/map"),U=e("./sequence/member/instance/filter"),R=e("./sequence/member/instance/scan"),D=e("./sequence/member/instance/fold"),C=e("./sequence/member/instance/group"),F=e("./sequence/member/instance/inits"),W=e("./sequence/member/instance/tails"),J=e("./sequence/member/instance/segs"),H=e("./sequence/member/instance/subsequences"),B=e("./sequence/member/instance/permutations");e("../compose").compose(r.Sequence,o.default,u.default,i.default,c.default,a.default,s.default,f.default,p.default,l.default,h.default,v.default,y.default,d.default,_.default,b.default,m.default,q.default,S.default,O.default,w.default,j.default,P.default,g.default,k.default,M.default,x.default,T.default,A.default,I.default,E.default,N.default,z.default,L.default,U.default,R.default,D.default,C.default,F.default,W.default,J.default,H.default,B.default)},{"../compose":9,"./sequence/core":26,"./sequence/member/instance/ap":27,"./sequence/member/instance/bind":28,"./sequence/member/instance/drop":29,"./sequence/member/instance/dropUntil":30,"./sequence/member/instance/dropWhile":31,"./sequence/member/instance/extract":32,"./sequence/member/instance/filter":33,"./sequence/member/instance/filterM":34,"./sequence/member/instance/fmap":35,"./sequence/member/instance/fold":36,"./sequence/member/instance/group":37,"./sequence/member/instance/inits":38,"./sequence/member/instance/iterate":39,"./sequence/member/instance/map":40,"./sequence/member/instance/mapM":41,"./sequence/member/instance/memoize":42,"./sequence/member/instance/permutations":43,"./sequence/member/instance/reduce":44,"./sequence/member/instance/scan":45,"./sequence/member/instance/segs":46,"./sequence/member/instance/sort":47,"./sequence/member/instance/subsequences":48,"./sequence/member/instance/tails":49,"./sequence/member/instance/take":50,"./sequence/member/instance/takeUntil":51,"./sequence/member/instance/takeWhile":52,"./sequence/member/static/concat":53,"./sequence/member/static/cycle":54,"./sequence/member/static/difference":55,"./sequence/member/static/from":56,"./sequence/member/static/intersect":57,"./sequence/member/static/mappend":58,"./sequence/member/static/mconcat":59,"./sequence/member/static/mempty":60,"./sequence/member/static/mplus":61,"./sequence/member/static/mzero":62,"./sequence/member/static/pure":63,"./sequence/member/static/random":64,"./sequence/member/static/resume":65,"./sequence/member/static/return":66,"./sequence/member/static/union":67,"./sequence/member/static/zip":68}],26:[function(e,t,n){"use strict";function r(){throw new Error("Spica: Sequence: Invalid thunk call.")}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("../monadplus"),i=function(e){function t(t){var n=e.call(this,r)||this;return n.cons=t,n}return o(t,e),t.prototype[Symbol.iterator]=function(){var e=this,n=function(){return e.iterate()};return{next:function(){var e=n();return n=t.Thunk.iterator(e),{done:!t.isIterable(e),value:t.Thunk.value(e)}}}},t}(u.MonadPlus);n.Sequence=i,i=n.Sequence||(n.Sequence={}),n.Sequence=i,function(e){function t(e){return n.iterator(e)!==r.done}!function(t){function n(t,n){switch(arguments.length){case 0:return[];case 1:return[t];case 2:return[t,n];default:throw e.Exception.invalidConsError(arguments)}}t.cons=n}(e.Data||(e.Data={}));var n;!function(e){function t(e){return e[0]}function n(e){return e[1]}function r(e){return e[2]}e.value=t,e.iterator=n,e.index=r}(n=e.Thunk||(e.Thunk={}));var r;!function(t){function r(t,o,u){return e.isIterable(t)?u(t,function(){return r(n.iterator(t)(),o,u)}):o(t)}t.done=function(){return[void 0,t.done,-1]},t.when=r}(r=e.Iterator||(e.Iterator={})),e.isIterable=t;!function(e){function t(e){return console.error(e,e.length,e[0],e[1]),new TypeError("Spica: Sequence: Invalid parameters of cons.")}function n(e){return console.error(e),new TypeError("Spica: Sequence: Invalid data.")}function r(e){return console.error(e),new TypeError("Spica: Sequence: Invalid thunk.")}e.invalidConsError=t,e.invalidDataError=n,e.invalidThunkError=r}(e.Exception||(e.Exception={}))}(i=n.Sequence||(n.Sequence={})),n.Sequence=i},{"../monadplus":24}],27:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.ap=function(e){return o.Sequence.ap(this,e)},t}(o.Sequence);n.default=u},{"../../core":26}],28:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.bind=function(e){return o.Sequence.concat(this.fmap(e))},t}(o.Sequence);n.default=u},{"../../core":26}],29:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.drop=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t,n){return o.Sequence.Thunk.index(t)<e?n():r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=u},{"../../core":26}],30:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.dropUntil=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t,n){return e(o.Sequence.Thunk.value(t))?n():r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=u},{"../../core":26}],31:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.dropWhile=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t,n){return e(o.Sequence.Thunk.value(t))?n():r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=u},{"../../core":26}],32:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=e("../../../../concat"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.extract=function(){for(var e=this,t=[],n=function(){return e.iterate()};;){var r=n();if(!o.Sequence.isIterable(r))return t;u.concat(t,[o.Sequence.Thunk.value(r)]),n=o.Sequence.Thunk.iterator(r)}},t}(o.Sequence);n.default=i},{"../../../../concat":10,"../../core":26}],33:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.filter=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t,n){return e(o.Sequence.Thunk.value(t),o.Sequence.Thunk.index(t))?r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t)):n()})})},t}(o.Sequence);n.default=u},{"../../core":26}],34:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=e("../../../../concat"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.filterM=function(e){var t=this;return o.Sequence.from([0]).bind(function(){var n=t.extract();switch(n.length){case 0:return o.Sequence.from([[]]);default:var r=n.shift();return e(r).bind(function(t){return t?0===n.length?o.Sequence.from([[r]]):o.Sequence.from(n).filterM(e).fmap(function(e){return u.concat([r],e)}):0===n.length?o.Sequence.from([[]]):o.Sequence.from(n).filterM(e)})}})},t}(o.Sequence);n.default=i},{"../../../../concat":10,"../../core":26}],35:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.fmap=function(e){var t=this;return new o.Sequence(function(n){
return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return o.Sequence.Data.cons()},function(t){return o.Sequence.Data.cons(e(o.Sequence.Thunk.value(t)),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=u},{"../../core":26}],36:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.fold=function(e,t){var n=this;return new o.Sequence(function(r){return void 0===r&&(r=function(){return n.reduce().iterate()}),o.Sequence.Iterator.when(r(),function(){return o.Sequence.Data.cons(t)},function(n){return o.Sequence.Data.cons(e(o.Sequence.Thunk.value(n),o.Sequence.resume(o.Sequence.Thunk.iterator(n)).fold(e,t)))})}).bind(function(e){return e})},t}(o.Sequence);n.default=u},{"../../core":26}],37:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=e("../../../../concat"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.group=function(e){var t=this;return new o.Sequence(function(n,r){var i=void 0===n?[function(){return t.iterate()},[]]:n,c=i[0],a=i[1];return o.Sequence.Iterator.when(c(),function(){return 0===a.length?r():r(a)},function(t,n){return 0===a.length||e(a[0],o.Sequence.Thunk.value(t))?(u.concat(a,[o.Sequence.Thunk.value(t)]),n()):r(a,[o.Sequence.Thunk.iterator(t),u.concat([],[o.Sequence.Thunk.value(t)])])})})},t}(o.Sequence);n.default=i},{"../../../../concat":10,"../../core":26}],38:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.inits=function(){return o.Sequence.mappend(o.Sequence.from([[]]),this.scan(function(e,t){return e.concat([t])},[]).dropWhile(function(e){return 0===e.length}))},t}(o.Sequence);n.default=u},{"../../core":26}],39:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.iterate=function(){return this.iterate_()},t.prototype.iterate_=function(e,t){var n=this;void 0===t&&(t=0);var r=this.cons(e,o.Sequence.Data.cons);switch(r.length){case 0:return[void 0,o.Sequence.Iterator.done,-1];case 1:return[r[0],function(){return o.Sequence.Iterator.done()},t];case 2:return[r[0],function(){return n.iterate_(r[1],t+1)},t];default:throw o.Sequence.Exception.invalidDataError(r)}},t}(o.Sequence);n.default=u},{"../../core":26}],40:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.map=function(e){var t=this;return new o.Sequence(function(n){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return o.Sequence.Data.cons()},function(t){return o.Sequence.Data.cons(e(o.Sequence.Thunk.value(t),o.Sequence.Thunk.index(t)),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=u},{"../../core":26}],41:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=e("../../../../concat"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.mapM=function(e){var t=this;return o.Sequence.from([0]).bind(function(){var n=t.extract();switch(n.length){case 0:return o.Sequence.mempty;default:var r=n.shift();return e(r).bind(function(t){return 0===n.length?o.Sequence.from([[t]]):o.Sequence.from(n).mapM(e).fmap(function(e){return u.concat([t],e)})})}})},t}(o.Sequence);n.default=i},{"../../../../concat":10,"../../core":26}],42:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=new WeakMap,i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.memoize=function(){var e=this;return new o.Sequence(function(t,n){var r=void 0===t?[0,u.get(e)||u.set(e,new Map).get(e)]:t,i=r[0],c=r[1];return o.Sequence.Iterator.when(c.get(i)||c.set(i,i>0&&c.has(i-1)?o.Sequence.Thunk.iterator(c.get(i-1))():e.iterate()).get(i),function(){return n()},function(e){return n(o.Sequence.Thunk.value(e),[i+1,c])})})},t}(o.Sequence);n.default=i},{"../../core":26}],43:[function(e,t,n){"use strict";function r(e,t){return u.Sequence.Iterator.when(e.iterate(),function(){return u.Sequence.mempty},function(e){return new u.Sequence(function(n,o){return u.Sequence.Iterator.when(e,function(){return o()},function(e){function n(e,t){return i(function(e){return e},e,t)[1]}function i(e,t,n){return u.Sequence.Iterator.when(t.iterate(),function(){return[a,n]},function(t){var r=u.Sequence.Thunk.value(t),o=i(function(t){return e(u.Sequence.mappend(u.Sequence.from([r]),t))},u.Sequence.resume(u.Sequence.Thunk.iterator(t)),n),a=o[0],s=o[1];return[u.Sequence.mappend(u.Sequence.from([r]),a),u.Sequence.mappend(u.Sequence.from([e(u.Sequence.mappend(u.Sequence.from([c]),u.Sequence.mappend(u.Sequence.from([r]),a))).extract()]),s)]})}var c=u.Sequence.Thunk.value(e),a=u.Sequence.resume(u.Sequence.Thunk.iterator(e)).memoize();return o(t.permutations().fold(function(e,t){return n(u.Sequence.from(e),t)},r(a,u.Sequence.mappend(u.Sequence.from([c]),t))))})}).bind(function(e){return e})})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.permutations=function(){var e=this;return u.Sequence.from([0]).bind(function(){var t=e.extract();return 0===t.length?u.Sequence.mempty:u.Sequence.from([t])}).bind(function(e){return u.Sequence.mappend(u.Sequence.from([e]),r(u.Sequence.from(e),u.Sequence.mempty))})},t}(u.Sequence);n.default=i},{"../../core":26}],44:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.reduce=function(){var e=this;return new o.Sequence(function(t,n){var r=void 0===t?[0,new Map]:t,u=r[0],i=r[1];return o.Sequence.Iterator.when(i.get(u)||i.set(u,u>0&&i.has(u-1)?o.Sequence.Thunk.iterator(i.get(u-1))():e.iterate()).get(u),function(){return n()},function(e){return n(o.Sequence.Thunk.value(e),[u+1,i])})})},t}(o.Sequence);n.default=u},{"../../core":26}],45:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.scan=function(e,t){var n=this;return new o.Sequence(function(r){var u=void 0===r?[t,function(){return n.iterate()},0]:r,i=u[0],c=u[1],a=u[2];return o.Sequence.Iterator.when(c(),function(){return 0===a?o.Sequence.Data.cons(t):o.Sequence.Data.cons()},function(t){return o.Sequence.Data.cons(i=e(i,o.Sequence.Thunk.value(t)),[i,o.Sequence.Thunk.iterator(t),o.Sequence.Thunk.index(t)+1])})})},t}(o.Sequence);n.default=u},{"../../core":26}],46:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=e("../../../../concat"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.segs=function(){return o.Sequence.mappend(this.fold(function(e,t){return t.take(1).bind(function(n){return o.Sequence.mappend(o.Sequence.from([o.Sequence.mappend(o.Sequence.from([[e]]),o.Sequence.from(n).map(function(t){return u.concat([e],t)}))]),t)})},o.Sequence.from([o.Sequence.from([])])).bind(function(e){return e}),o.Sequence.from([[]]))},t}(o.Sequence);n.default=i},{"../../../../concat":10,"../../core":26}],47:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.sort=function(e){return o.Sequence.from(this.extract().sort(e))},t}(o.Sequence);n.default=u},{"../../core":26}],48:[function(e,t,n){"use strict";function r(e){return u.Sequence.Iterator.when(e.iterate(),function(){return u.Sequence.mempty},function(e){return u.Sequence.mappend(u.Sequence.from([[u.Sequence.Thunk.value(e)]]),new u.Sequence(function(t,n){return u.Sequence.Iterator.when(e,function(){return n()},function(e){return n(r(u.Sequence.resume(u.Sequence.Thunk.iterator(e))).fold(function(t,n){return u.Sequence.mappend(u.Sequence.mappend(u.Sequence.from([t]),u.Sequence.from([i.concat([u.Sequence.Thunk.value(e)],t)])),n)},u.Sequence.mempty))})}).bind(function(e){return e}))})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("../../core"),i=e("../../../../concat"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.subsequences=function(){var e=this;return u.Sequence.mappend(u.Sequence.from([[]]),u.Sequence.from([0]).bind(function(){return r(e)}))},t}(u.Sequence);n.default=c},{"../../../../concat":10,"../../core":26}],49:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.tails=function(){return o.Sequence.mappend(o.Sequence.from(this.extract().map(function(e,t,n){return n.slice(t)})),o.Sequence.from([[]]))},t}(o.Sequence);n.default=u},{"../../core":26}],50:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.take=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(e>0?n():o.Sequence.Iterator.done(),function(){return r()},function(t){return o.Sequence.Thunk.index(t)+1<e?r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t)):r(o.Sequence.Thunk.value(t))})})},t}(o.Sequence);n.default=u},{"../../core":26}],51:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.takeUntil=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t){return e(o.Sequence.Thunk.value(t))?r(o.Sequence.Thunk.value(t)):r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t))})})},t}(o.Sequence);n.default=u},{"../../core":26}],52:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.takeWhile=function(e){var t=this;return new o.Sequence(function(n,r){return void 0===n&&(n=function(){return t.iterate()}),o.Sequence.Iterator.when(n(),function(){return r()},function(t){return e(o.Sequence.Thunk.value(t))?r(o.Sequence.Thunk.value(t),o.Sequence.Thunk.iterator(t)):r()})})},t}(o.Sequence);n.default=u},{"../../core":26}],53:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.concat=function(e){return new o.Sequence(function(t,n){var r=void 0===t?[function(){return e.iterate()},o.Sequence.Iterator.done]:t,u=r[0],i=r[1];return o.Sequence.Iterator.when(u(),function(){return n()},function(e,t){return i=i===o.Sequence.Iterator.done?function(){return o.Sequence.Thunk.value(e).iterate()}:i,o.Sequence.Iterator.when(i(),function(){return i=o.Sequence.Iterator.done,t()},function(t){return n(o.Sequence.Thunk.value(t),[function(){return e},o.Sequence.Thunk.iterator(t)])})})})},t}(o.Sequence);n.default=u},{"../../core":26}],54:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.cycle=function(e){return new o.Sequence(function t(n,r){var o=void 0===n?[e[Symbol.iterator](),0]:n,u=o[0],i=o[1],c=u.next();return c.done?t([e[Symbol.iterator](),i+1],r):r(c.value,[u,i+1])}).reduce()},t}(o.Sequence);n.default=u},{"../../core":26}],55:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.difference=function(e,t,n){return new o.Sequence(function(r,u){var i=void 0===r?[function(){return e.iterate()},function(){return t.iterate()}]:r,c=i[0],a=i[1];return o.Sequence.Iterator.when(c(),function(){return o.Sequence.Iterator.when(a(),function(){return u()},function(e){return u(o.Sequence.Thunk.value(e),[o.Sequence.Iterator.done,o.Sequence.Thunk.iterator(e)])})},function(e,t){return o.Sequence.Iterator.when(a(),function(){return u(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),o.Sequence.Iterator.done])},function(r){var i=n(o.Sequence.Thunk.value(e),o.Sequence.Thunk.value(r));return i<0?u(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),function(){return r}]):i>0?u(o.Sequence.Thunk.value(r),[function(){return e},o.Sequence.Thunk.iterator(r)]):(a=function(){return o.Sequence.Thunk.iterator(r)()},t())})})})},t}(o.Sequence);n.default=u},{"../../core":26}],56:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.from=function(e){return new o.Sequence(function(t,n){var r=void 0===t?[e[Symbol.iterator](),0]:t,o=r[0],u=r[1],i=o.next();return i.done?n():n(i.value,[o,u+1])}).reduce()},t}(o.Sequence);n.default=u},{"../../core":26}],57:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.intersect=function(e,t,n){return new o.Sequence(function(r,u){var i=void 0===r?[function(){return e.iterate()},function(){return t.iterate()}]:r,c=i[0],a=i[1];return o.Sequence.Iterator.when(c(),function(){return u()},function(e,t){return o.Sequence.Iterator.when(a(),function(){return u()},function(r,i){var c=n(o.Sequence.Thunk.value(e),o.Sequence.Thunk.value(r));return c<0?(a=function(){return r},t()):c>0?i():u(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),o.Sequence.Thunk.iterator(r)])})})})},t}(o.Sequence);n.default=u},{"../../core":26}],58:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.mappend=function(e,t){return o.Sequence.mconcat([e,t])},t}(o.Sequence);n.default=u},{"../../core":26}],59:[function(e,t,n){"use strict";function r(e,t){return new u.Sequence(function(n,r){var o=void 0===n?[function(){return e.iterate()},function(){return t.iterate()}]:n,i=o[0],c=o[1];return u.Sequence.Iterator.when(i(),function(){return u.Sequence.Iterator.when(c(),function(){return r()},function(e){return r(u.Sequence.Thunk.value(e),[u.Sequence.Iterator.done,u.Sequence.Thunk.iterator(e)])})},function(e){return r(u.Sequence.Thunk.value(e),[u.Sequence.Thunk.iterator(e),c])})})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("../../core"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.mconcat=function(e){return Array.from(e).reduce(function(e,t){return r(e,t)},u.Sequence.mempty)},t}(u.Sequence);n.default=i},{"../../core":26}],60:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Sequence);u.mempty=new o.Sequence(function(e,t){return t()}),n.default=u},{"../../core":26}],61:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Sequence);u.mplus=o.Sequence.mappend,n.default=u},{"../../core":26}],62:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.Sequence);u.mzero=o.Sequence.mempty,n.default=u},{"../../core":26}],63:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.pure=function(e){return new o.Sequence(function(t,n){return n(e)})},t}(o.Sequence);n.default=u},{"../../core":26}],64:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.random=function(e){return void 0===e&&(e=function(){return Math.random()}),"function"==typeof e?o.Sequence.from(new o.Sequence(function(t,n){return n(e(),t)})):this.random().map(function(t){return e[t*e.length|0]})},t}(o.Sequence);n.default=u},{"../../core":26}],65:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.resume=function(e){return new o.Sequence(function(t,n){return void 0===t&&(t=e),o.Sequence.Iterator.when(t(),function(){return n()},function(e){return n(o.Sequence.Thunk.value(e),o.Sequence.Thunk.iterator(e))})})},t}(o.Sequence);n.default=u},{"../../core":26}],66:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.Return=function(e){return new o.Sequence(function(t,n){return n(e)})},t}(o.Sequence);n.default=u},{"../../core":26}],67:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.union=function(e,t,n){return new o.Sequence(function(r,u){var i=void 0===r?[function(){return e.iterate()},function(){return t.iterate()}]:r,c=i[0],a=i[1];return o.Sequence.Iterator.when(c(),function(){return o.Sequence.Iterator.when(a(),function(){return u()},function(e){return u(o.Sequence.Thunk.value(e),[o.Sequence.Iterator.done,o.Sequence.Thunk.iterator(e)])})},function(e){return o.Sequence.Iterator.when(a(),function(){return u(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),o.Sequence.Iterator.done])},function(t){var r=n(o.Sequence.Thunk.value(e),o.Sequence.Thunk.value(t));return r<0?u(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),function(){return t}]):r>0?u(o.Sequence.Thunk.value(t),[function(){return e},o.Sequence.Thunk.iterator(t)]):u(o.Sequence.Thunk.value(e),[o.Sequence.Thunk.iterator(e),o.Sequence.Thunk.iterator(t)])})})})},t}(o.Sequence);n.default=u},{"../../core":26}],68:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.zip=function(e,t){return new o.Sequence(function(n,r){var u=void 0===n?[function(){return e.iterate()},function(){return t.iterate()}]:n,i=u[0],c=u[1];return o.Sequence.Iterator.when(i(),function(){return r()},function(e){return o.Sequence.Iterator.when(c(),function(){return r()},function(t){return r([o.Sequence.Thunk.value(e),o.Sequence.Thunk.value(t)],[o.Sequence.Thunk.iterator(e),o.Sequence.Thunk.iterator(t)])})})})},t}(o.Sequence);n.default=u},{"../../core":26}],69:[function(e,t,n){"use strict";function r(){}Object.defineProperty(n,"__esModule",{value:!0}),n.noop=r},{}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./concat"),o=e("./stringify"),u=function(){function e(){this.node_={parent:void 0,children:new Map,childrenNames:[],registers:[]}}return e.prototype.monitor=function(e,t,n){var r=this;return void 0===n&&(n=t),this.throwTypeErrorIfInvalidSubscriber_(t,e),this.seekNode_(e).registers.push([e,n,!0,t]),function(){return r.off(e,n)}},e.prototype.on=function(e,t,n){var r=this;return void 0===n&&(n=t),this.throwTypeErrorIfInvalidSubscriber_(t,e),this.seekNode_(e).registers.push([e,n,!1,function(e){return t(e)}]),function(){return r.off(e,n)}},e.prototype.off=function(e,t){switch(typeof t){case"function":return void this.seekNode_(e).registers.some(function(e,n,r){var o=e[1];if(t!==o)return!1;switch(n){case 0:return!void r.shift();case r.length-1:return!void r.pop();default:return!void r.splice(n,1)}});case"undefined":var n=this.seekNode_(e);return n.children=new Map,n.childrenNames=[],void(n.registers=[]);default:throw this.throwTypeErrorIfInvalidSubscriber_(t,e)}},e.prototype.once=function(e,t){var n=this;return this.throwTypeErrorIfInvalidSubscriber_(t,e),this.on(e,function(r){return n.off(e,t),t(r)},t)},e.prototype.emit=function(e,t,n){this.drain_(e,t,n)},
e.prototype.reflect=function(e,t){var n=[];return this.emit(e,t,function(e,t){return n=t}),n},e.prototype.drain_=function(e,t,n){var r=[];if(this.refsBelow_(this.seekNode_(e)).reduce(function(e,u){var i=u[2],c=u[3];if(!i)try{var a=c(t);n&&(r[r.length]=a)}catch(e){void 0!==e&&null!==e&&console.error(o.stringify(e))}},void 0),this.refsAbove_(this.seekNode_(e)).reduce(function(e,n){var r=n[2],u=n[3];if(r)try{u(t)}catch(e){void 0!==e&&null!==e&&console.error(o.stringify(e))}},void 0),n)try{n(t,r)}catch(e){console.error(o.stringify(e))}},e.prototype.refs=function(e){return this.refsBelow_(this.seekNode_(e))},e.prototype.refsAbove_=function(e){var t=e.parent,n=e.registers;for(n=r.concat([],n);t;)n=r.concat(n,t.registers),t=t.parent;return n},e.prototype.refsBelow_=function(e){var t=e.childrenNames,n=e.children,o=e.registers;o=r.concat([],o);for(var u,i=this,c=0;c<t.length;++c)!function(e){var c=t[e],a=i.refsBelow_(n.get(c));o=r.concat(o,a),0===a.length&&(n.delete(c),t.splice(t.findIndex(function(e){return e===c||c!==c&&e!==e}),1),--e),u=e}(c),c=u;return o},e.prototype.seekNode_=function(e){for(var t=this.node_,n=0,r=e;n<r.length;n++){var o=r[n],u=t.children;u.has(o)||(t.childrenNames.push(o),u.set(o,{parent:t,children:new Map,childrenNames:[],registers:[]})),t=u.get(o)}return t},e.prototype.throwTypeErrorIfInvalidSubscriber_=function(e,t){switch(typeof e){case"function":return;default:throw new TypeError("Spica: Observable: Invalid subscriber.\n\t"+t+" "+e)}},e}();n.Observable=u},{"./concat":10,"./stringify":73}],71:[function(e,t,n){"use strict";function r(e,t,n,r){if(void 0===r&&(r=!1),!r&&n*n>1.25*e.length)return e.sort(t);n=n<e.length-1?n:e.length-1;for(var o=0;o<n;++o)for(var u=o+1;u<e.length;++u)if(t(e[o],e[u])>0!=!1){var i=e[o];e[o]=e[u],e[u]=i}return e}Object.defineProperty(n,"__esModule",{value:!0}),n.sort=r},{}],72:[function(e,t,n){"use strict";function r(e){if(arguments.length>0){if("number"!=typeof e)throw new TypeError("Spica: sqid: A parameter value must be a number: "+e);if(e>=0==!1)throw new TypeError("Spica: sqid: A parameter value must be a positive number: "+e);if(e%1!=0)throw new TypeError("Spica: sqid: A parameter value must be an integer: "+e)}return void 0===e?(++o+1e15+"").slice(1):(1e15+e+"").slice(1)}Object.defineProperty(n,"__esModule",{value:!0});var o=0;n.sqid=r},{}],73:[function(e,t,n){"use strict";function r(e){try{return e instanceof Error&&"string"==typeof e.stack?e.stack:"toString"in e&&"function"==typeof e.toString?e+"":Object.prototype.toString.call(e)}catch(e){return r(e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.stringify=r},{}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./observable"),o=e("./tick"),u=e("./thenable"),i=e("./sqid"),c=e("./stringify"),a=e("./noop"),s=function(){function e(t){var n=void 0===t?{}:t,o=n.name,s=void 0===o?"":o,f=n.size,p=void 0===f?1/0:f,l=n.timeout,h=void 0===l?1/0:l,v=n.destructor,y=void 0===v?a.noop:v,d=this;if(this.id=i.sqid(),this.events={init:new r.Observable,loss:new r.Observable,exit:new r.Observable},this.workers=new Map,this.alive=!0,this.available=!0,this.resource=10,this.messages=[],this.deliver=function(){for(var e,t,n=Date.now(),r=d.resource,o=0,i=d.messages.length;d.available&&o<i&&r>0;++o)!function(o,i){var a=Date.now();r-=a-n;var s=d.messages[o],f=s[0],p=s[1],l=s[2],h=s[3],v=s[4],y=d.workers.has(f)?d.workers.get(f).call([p,v+h-a]):void 0;if(d.available&&!y&&a<v+h)return e=o,t=i,"continue";if(0===o?d.messages.shift():d.messages.splice(o,1),--o,--i,void 0===y&&d.events.loss.emit([f],[f,p]),void 0===y||y instanceof Error){try{l(void 0,new Error("Spica: Supervisor: A processing has failed."))}catch(e){console.error(c.stringify(e))}return e=o,t=i,"continue"}var _=y[0];if(u.isThenable(_))Promise.resolve(_).then(function(e){return d.available?void l(e):void l(void 0,new Error("Spica: Supervisor: A processing has failed."))},function(){return void l(void 0,new Error("Spica: Supervisor: A processing has failed."))}).catch(function(e){return void console.error(c.stringify(e))});else try{l(_)}catch(e){console.error(c.stringify(e))}e=o,t=i}(o,i),o=e,i=t;if(!d.available){for(;d.messages.length>0;){var a=d.messages.shift(),s=a[0],f=a[1];d.events.loss.emit([s],[s,f])}return void Object.freeze(d.messages)}r>0||d.schedule()},this.constructor===e)throw new Error("Spica: Supervisor: <"+this.id+"/"+this.name+">: Cannot instantiate abstract classes.");this.name=s,this.size=p,this.timeout=h,this.destructor_=y,++this.constructor.count}return e.prototype.destructor=function(e){this.available=!1,Array.from(this.workers.values()).forEach(function(t){return void t.terminate(e)}),this.deliver(),this.alive=!1,--this.constructor.count,Object.freeze(this),this.destructor_(e)},e.prototype.validate=function(){if(!this.available)throw new Error("Spica: Supervisor: <"+this.id+"/"+this.name+">: A supervisor is already terminated.")},e.prototype.register=function(e,t,n){var r=this;if(this.validate(),this.workers.has(e))throw new Error("Spica: Supervisor: <"+this.id+"/"+this.name+"/"+e+">: Cannot register a process multiply with the same name.");return this.schedule(),t="function"==typeof t?{init:function(e){return e},call:t,exit:function(e){}}:t,++this.constructor.procs,this.workers.set(e,new f(this,e,t,n,function(){return r.workers.delete(e),void--r.constructor.procs})).get(e).terminate},e.prototype.call=function(e,t,n,r){var o=this;for(void 0===r&&(r=this.timeout),this.validate();this.messages.length+1>this.size;){var u=this.messages.shift(),i=u[0],a=u[1],s=u[2];this.events.loss.emit([i],[i,a]);try{s(void 0,new Error("Spica: Supervisor: A message overflowed."))}catch(e){console.error(c.stringify(e))}}this.messages.push([e,t,n,r,Date.now()]),this.schedule(),r<=0||r!==1/0&&setTimeout(function(){return void o.deliver()},r+9)},e.prototype.cast=function(e,t,n){void 0===n&&(n=this.timeout),this.validate();var r=this.workers.has(e)?this.workers.get(e).call([t,n]):void 0;return void 0===r&&this.events.loss.emit([e],[e,t]),!(void 0===r||r instanceof Error)},e.prototype.refs=function(e){function t(e){return[e.name,e.process,e.state,e.terminate]}return this.validate(),void 0===e?Array.from(this.workers.values()).map(t):this.workers.has(e)?[t(this.workers.get(e))]:[]},e.prototype.terminate=function(e,t){return!!this.available&&(void 0===e?void 0===void this.destructor(t):Array.from(this.workers.values()).filter(function(t){return t.name===e}).filter(function(e){return e.terminate(t)}).length>0)},e.prototype.schedule=function(){o.Tick(this.deliver,!0)},e}();s.count=0,s.procs=0,n.Supervisor=s,s=n.Supervisor||(n.Supervisor={}),n.Supervisor=s;var f=function(){function e(e,t,n,r,o){var i=this;this.sv=e,this.name=t,this.process=n,this.state=r,this.destructor_=o,this.alive=!0,this.available=!0,this.times=0,this.call=function(e){var t=e[0],n=e[1];if(i.available)try{i.available=!1,++i.times,1===i.times&&(i.sv.events.init.emit([i.name],[i.name,i.process,i.state]),i.state=i.process.init(i.state));var r=i.process.call(t,i.state);if(u.isThenable(r))return[new Promise(function(e,t){return r.then(e,t),n===1/0?void 0:void setTimeout(function(){return void t(new Error)},n)}).then(function(e){var t=e[0],n=e[1];return i.sv.schedule(),i.alive?(i.state=n,i.available=!0,t):Promise.reject(new Error)},function(e){throw i.sv.schedule(),i.terminate(e),e})];var o=r[0],c=r[1];return i.state=c,i.available=!0,[o]}catch(e){return i.terminate(e),new Error}},this.terminate=function(e){return!!i.alive&&(i.destructor(e),!0)}}return e.prototype.destructor=function(e){this.alive=!1,this.available=!1,Object.freeze(this),this.destructor_();try{this.process.exit(e,this.state),this.sv.events.exit.emit([this.name],[this.name,this.process,this.state,e])}catch(t){this.sv.events.exit.emit([this.name],[this.name,this.process,this.state,e]),this.sv.terminate(void 0,t)}},e}()},{"./noop":69,"./observable":70,"./sqid":72,"./stringify":73,"./thenable":75,"./tick":76}],75:[function(e,t,n){"use strict";function r(e){return!!e&&"object"==typeof e&&"function"==typeof e.then}Object.defineProperty(n,"__esModule",{value:!0}),n.isThenable=r},{}],76:[function(e,t,n){"use strict";function r(e,t){void 0===t&&(t=!1),c.push([e,t]),u()}function o(){s=!1;for(var e=c.length;;){try{for(;e>0;){--e;var t=c.shift(),n=t[0];if(t[1]){if(a.has(n))continue;a.add(n)}n()}}catch(e){console.error(i.stringify(e));continue}a=new WeakSet;break}}function u(){s||0!==c.length&&(Promise.resolve().then(o),s=!0)}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./stringify"),c=[],a=new WeakSet,s=!1;n.Tick=r},{"./stringify":73}],77:[function(e,t,n){"use strict";function r(e){return Object.prototype.toString.call(e).split(" ").pop().slice(0,-1)}Object.defineProperty(n,"__esModule",{value:!0}),n.type=r},{}],78:[function(e,t,n){"use strict";function r(){for(var e="",t=0,n=o;t<n.length;t++){var r=n[t];if("x"===r||"y"===r){var u=16*Math.random()|0;e+=("x"==r?u:3&u|8).toString(16)}else e+=r}return e.toLowerCase()}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.freeze("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split(""));n.v4=r},{}],spica:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./src/export"))},{"./src/export":3}]},{},[1,2,"spica"]);